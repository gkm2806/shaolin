{"version":3,"sources":["../../src/purger/THE_PURGER.js"],"names":["console","log","oldAulas","j","schedule","scheduleJob","hour","minute","dayOfWeek","Aula","find","err","aulas","today","moment","now","forEach","aula","fixa","createdAt","diff","past","findByIdAndUpdate","_id"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,IAAIC,QAAQ,GAAG,EAAf;;AAEA,IAAIC,CAAC,GAAGC,yBAASC,WAAT,CAAqB;AAACC,EAAAA,IAAI,EAAE,CAAP;AAAUC,EAAAA,MAAM,EAAE,CAAlB;AAAqBC,EAAAA,SAAS,EAAE;AAAhC,CAArB,EAAyD,YAAY;AACzER,EAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;;AACAQ,mBAAKC,IAAL,CAAU,EAAV,EAAc,UAACC,GAAD,EAAMC,KAAN,EAAgB;AAC1B,QAAIC,KAAK,GAAGC,mBAAOC,GAAP,EAAZ;;AAEAH,IAAAA,KAAK,CAACI,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAc,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AACVjB,gBAAAA,OAAO,CAACC,GAAR,CAAYgB,IAAZ;;AADU,sBAEN,CAACA,IAAI,CAACC,IAAN,IAAe,wBAAOD,IAAI,CAACE,SAAZ,EAAuB,gBAAvB,EAAyC,IAAzC,EAA+CC,IAA/C,CAAoDP,KAApD,EAA2D,MAA3D,IAAqE,CAAC,CAF/E;AAAA;AAAA;AAAA;;AAINI,gBAAAA,IAAI,CAACI,IAAL,GAAY,IAAZ;AACArB,gBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BgB,IAA9B;AALM;AAAA,uBAMAR,iBAAKa,iBAAL,CAAuBL,IAAI,CAACM,GAA5B,EAAiCN,IAAjC,CANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAd;;AAAA;AAAA;AAAA;AAAA;AAWH,GAdD;AAeH,CAjBO,CAAR","sourcesContent":["import Aula from \"../models/aula\"\nimport moment from \"moment\"\nimport schedule from \"node-schedule\"\nimport aulaRouter from \"../routers/aulas\";\n\nconsole.log(\"Welcome to aula hell\")\nlet oldAulas = []\n\nvar j = schedule.scheduleJob({hour: 0, minute: 0, dayOfWeek: 5}, function () {\n    console.log(\"PURGIN ALL THE UNHOLY SOU--aulas\")\n    Aula.find({}, (err, aulas) => {\n        let today = moment.now()\n\n        aulas.forEach(async (aula) => {\n            console.log(aula)\n            if (!aula.fixa && (moment(aula.createdAt, \"YYYYMMDDhhmmss\", true).diff(today, 'days') < -7)) {\n\n                aula.past = true\n                console.log(\"DENTRO DO IF: \", aula)\n                await Aula.findByIdAndUpdate(aula._id, aula)\n            }\n\n        })\n\n    })\n});"],"file":"THE_PURGER.js"}